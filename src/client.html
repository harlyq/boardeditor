<!DOCTYPE html>
<html>

<head>
    <script src="interact.js" type="text/javascript"></script>
    <script type="text/javascript">
    var req = new XMLHttpRequest();
    req.onload = function() {
        console.log(JSON.parse(this.response));
        lastId++;
    };
    var user = 0;
    var lastId = -1;

    function requestCommands() {
        req.open('get', 'rose?user=' + user + '&lastId=' + lastId);
        req.setRequestHeader('Content-Type', 'application/json');
        req.send();
    }

    function postCommand() {
        var newCommand = {
            id: lastId,
            a: 'this is a string',
            b: 10
        };
        req.open('post', 'white');
        req.setRequestHeader('Content-Type', 'application/json');
        req.send(JSON.stringify(newCommand));
    }

    window.addEventListener('load', function() {
        document.getElementById('post').addEventListener('click', postCommand);
        document.getElementById('request').addEventListener('click', requestCommands);
    });
    </script>
</head>

<body>
    <button id="request">REQUEST</button>
    <button id="post">POST</button>
</body>

</html>
